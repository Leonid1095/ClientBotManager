#!/bin/bash
# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–æ—Ç–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ —Å –Ω–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–æ–π –±–µ–∫–∞–ø–æ–≤

echo "üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ ClientBotManager –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ..."
echo ""

# –ü–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –±–æ—Ç–∞
cd ~/clientbotmanager || exit 1

# –û–±–Ω–æ–≤–ª—è–µ–º –∫–æ–¥
echo "üì• –ó–∞–≥—Ä—É–∂–µ–Ω–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π —Å GitHub..."
git pull origin main

# –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ –Ω–æ–≤—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
echo "üì¶ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π..."
pip install -r requirements.txt --upgrade

# –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º —Å–µ—Ä–≤–∏—Å
echo "üîÑ –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ —Å–µ—Ä–≤–∏—Å–∞..."
sudo systemctl restart clientbotmanager

# –ñ–¥–µ–º –Ω–µ–º–Ω–æ–≥–æ, –ø–æ–∫–∞ —Å–µ—Ä–≤–∏—Å –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è
sleep 2

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
echo ""
echo "‚úÖ –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–∞:"
sudo systemctl status clientbotmanager --no-pager

echo ""
echo "üíæ –°–∏—Å—Ç–µ–º–∞ –±–µ–∫–∞–ø–æ–≤ –∞–∫—Ç–∏–≤–Ω–∞!"
echo "–ö–æ–º–∞–Ω–¥—ã –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞:"
echo "  /backup           - —Å–æ–∑–¥–∞—Ç—å –±–µ–∫–∞–ø —Å–µ–π—á–∞—Å"
echo "  /backup_list      - –ø–æ–∫–∞–∑–∞—Ç—å —Å–ø–∏—Å–æ–∫ –±–µ–∫–∞–ø–æ–≤"
echo "  /backup_settings  - –ø–æ–∫–∞–∑–∞—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏"
echo ""
echo "üìñ –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: https://github.com/Leonid1095/ClientBotManager/blob/main/BACKUP.md"
